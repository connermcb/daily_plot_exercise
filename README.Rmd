---
title: "(Almost) Daily Plots"
author: "Conner McBride"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, 
                      collapse = TRUE,
                      comment = "#>",
                      fig.path = "README-")
```

## About

This repo is a simple container for my practice plots. I work with _ggplot_, _matplotlib_, and _Tableau_ primarily to build attractive visualizations. The goal is to build a plot a day and add it to this container. As the title notes, I don't to adding a plot quite everyday...

## The Plots
**Plot 28 October 13, 2018:** 

The scatterplotMatrix plot function in the `car` package offers more options like linear trend lines, smooth fit lines, and multiple options for univariate charts in the plot spaces along the grid diagonal. 

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get pkgs and data
library(car)
library(Sleuth2)
attach(ex1713)

# create plot
scatterplotMatrix( ~ Distinct + Attend + NonChurch + StrongPct + AnnInc,
                   col='black',
                   smooth=list(smoother=loessLine, spread=F, lty.smooth=1,
                               lwd.smooth=1, col.smooth='green'),
                   regLine=list(method=lm, lty=1, lwd=1, col='red')) 
        
```

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# plot variations of scatterplotMatrix
scatterplotMatrix( ~ Distinct + Attend + NonChurch + StrongPct + AnnInc,
                   smooth = list(smoother=loessLine, spread=T, lty.smooth=1, 
                                 lwd.smooth=1, lty.spread=3, lwd.spread=0.5,
                                 col.smooth='green', col.spread='lightgreen'),
                   diagonal = list(method="histogram", breaks="FD", col='green'),
                   col = 'black',
                   regLine = list(method=lm, lty=1, lwd=1, col='red'))



# clean up 
detach(ex1713)
```

```{r}

```



**Plot 27 October 12, 2018:** Still working with _Graphing Data with R_, today we start with multivariable graphs. The pairs plot is good place to start exploring a dataset and get an overview that might reveal possible relationships among variables that warrent deeper analysis. 

The pairs plot below looks at the relationships between all of the variables in a dataset that looks at the strictness of religious denominations and possible correlations to other social metrics.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get pkgs and data
library(Sleuth2)
attach(ex1713)

# pairs plot
pairs(~ Distinct + Attend + NonChurch + StrongPct + AnnInc, 
      pch = 16, col = 'deepskyblue')
# clean up
detach(ex1713)

```


**Plot 26 October 2, 2018:** Today we look at charts that can be used to compare the distributions of two vectors or arrays.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get pkgs and data
library(reshape2)
attach(tips)
ran <- sort(rnorm(100000))
newtip <- (tip - mean(tip)) / sd(tip)
qtip <- quantile(tip, seq(0, 1, .005))

# set plot params
par(mfrow=c(2,2))

# make plot 1
plot(density(tip), main = "Distribution Density Tips",
     lwd = 2, col = "blue")


# make plot 2
plot(density(ran), main = "Density Tips vs NormalDist",
     lwd = 1, xlim = c(-5, 8), ylim = c(0, 0.41))
polygon(density(ran), col = "burlywood")
lines(density(tip), col = "blue", lwd = 2)

# make plot 3
plot(density(ran), main = "Normalized Density Tips vs. NormalDist",
     lwd = 1, xlim = c(-5, 8), ylim = c(0, 0.5))
polygon(density(ran), col = "burlywood")
lines(density(newtip), col = "blue", lwd = 2)

# make plot 4
qqplot(ran, qtip, main = "QQ-Plot",
       xlim = c(-3,3), col = "skyblue2")
qqline(qtip, col = "burlywood", lwd = 2)
grid(lty = "dotted", col = "gray75")

detach(tips)

```


**Plot 25 September 29, 2018:** The last of the charts featured in _Graphing Data with R_ designed to deal with dense data, the Hexbin Plot. As the name suggest, the datapoints are binned geometrically into hexagonally defined coordinate regions. A color gradient is used to fill in the hexagonal regions according to their density.In this and the smooth scatter plot, color gradients are used to encode amounts,intensities, or densities.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get pkgs and data
library(hexbin)
library(car)
attach(Vocab)

# make plot
plot(hexbin(education, vocabulary, xbins = 8),
     main = "Hexbin Plot", xlab = "Education", ylab = "Vocabulary",
     colramp = magent)

# clean up
detach(Vocab)
```
The above implementation uses the base plot function on the binned data. The `hexbin` package also includes its own plotter which is much more readily customizable. For comparison:

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get pkgs and data
library(hexbin)
library(car)

# make plot
hexbinplot(vocabulary ~ education, data = Vocab, xbins = 10,
     main = "Hexbin Plot", xlab = "Education", ylab = "Vocabulary",
     colramp = magent, cex.labels = 0.8)

```


**Plot 24 September 28, 2018:** Continuing with different charts that are well-suited to plotting large datasets and distinguising trends in densly plotted cooridinate spaces, today we'll look at a smooth scatter plot. The smooth scatter plot uses color saturation and intensity to show areas of high density. The smooth scatter plot shows granular detail better than the jitter or sunflower plots could.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get pkgs and data
library(car)
attach(Vocab)

# set plot params
par(mai= c(0.5,1.5,0.5,1.5))

# make plot
smoothScatter(education, vocabulary, 
              las = 1, # rotates numbers on axis
              family = "HersheySerif",
              main = "Smooth Scatter Plot", font = 3)

# clean up
detach(Vocab)

```


**Plot 23 September 23, 2018:** Scatter plots that use discrete data with a large number of points tend to overplot masking the true density across the plot space. One method available to deal with this is to apply a jitter function that offsets each point so that they aren't plotted directly over other points.

The examples below are from _Graphing Data with R_.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get pkgs and data
library(car)
attach(Vocab)

# plot using jitter
sp(education, vocabulary, jitter = list(x = 2, y = 2), smoother = FALSE, spread = FALSE, reg.line = FALSE)

# clean up
detach(Vocab)

```

The sunflower plot offers an alternative to applying the jitter function to discrete data that tends to overplot. A _petal_ or line is drawn for each observation that fall on a particular coordinate in the plot. The sunflower plot is one option for revealing the density of overplotted data.

```{r}
# get pkgs and data
library(car)
attach(Vocab)

# plot
sunflowerplot(education, vocabulary, 
              main = "Sunflower Plot",
              col.main = "deepskyblue3",
              family = "HersheySerif",
              font.lab = 3)

# clean up
detach(Vocab)
```




**Plot 22 September 22, 2018:** The trellis plot is means of effectively controlling for categorical variables by plotting separately the intersections between the levels of these variables. The `xyplot()` function is part of the lattice package which is specifically designed for producing trellis plots. Here's an example, that separates or facets a two-variable scatter plot by the levels of third variable using panels or frames for each level of the control variable:

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get pkgs and data
library(lattice)
attach(Puromycin)

# plot 
xyplot(rate ~ conc | state, pch=18, main = "Trellis Plot Example", 
       xlab = "Substrate Concentration", ylab = "Reaction Rate")

# clean up
detach(Puromycin)
```


**Plot 21 September 18, 2018:** Today's plot uses the scatter plot function in the `car` package. 

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# packages and data
library(car)
attach(trees)

# plot
scatterplot(Girth~Height, col = 'black',
            regLine = list(method = lm, lty = 1, lwd = 1, col = 'green'),
            smooth = list(smoother = loessLine,  
                          lty.smooth = 2, lty.spread = 4, lwd.smooth = 2,
                          lwd.spread = 1, col.smooth = 'red', col.spread = 'red'),
            main = "Sample of Scatterplot (car package)")


# clean up
detach(trees)

```


**Plot 20 September 9, 2018:** Today is a single plot similar to the comibnation histogram and line plot in the last study. This time the default axis labels will be suppressed in favor of custom labels that give more information about independent and dependent variables.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get data
library(HistData)
attach(Nightingale)

# set size of plotframe
par(mar= c(6,6,5,5), cex = 0.8) 

# chart labels
t = "British Army Deaths During Crimean War"
x = "Date from April, 1854 to March, 1856"
y = "Number of Deaths per Month"

# data manipulation, calculated varible
Army2 <- (Army)/20
mon <- 1:24

# plot histogram of disease deaths and basic format
plot(mon, Disease, type = 'h',
     lwd = 22, col = 'gray67',
     lend = 'butt', main = t, 
     col.main = 'maroon',
     ylab = y, xlab = x,
     cex.lab = 0.8,
     las = 1,
     cex.axis = 0.9,
     bty = 'l', xaxt = 'n')
# plot wounds line 
lines(mon, Wounds, 
      pch = 18, col = 'red',
      lty = 'solid',
      lwd = 2)
# plot other line
lines(mon, Other,
     lty = 'dotted',
     col = 'navyblue',
     lwd = 3)
# plot total army strength
lines(mon, Army2, 
     lty = 'dashed',
     col = 'seagreen',
     lwd = 2)

# set horizontal axis
axis(1, at=c(2, 6, 10, 14, 18, 22), 
     labels = c("May 54", "Sep 54", "Jan 55", "May 55", "Sep 55", "Jan 56"))

# set vertical axis
axis(4, at = c(0, 500, 1000, 1500, 2000, 2500),
     labels = c("0k", "10k", "20k", "30k", "40k", "50k"),
     las = 1, tick = T, cex.lab = 0.6, col = 'seagreen4',
     col.axis = 'seagreen4', ylab = "Troop Strength")

legend('topleft', c("Disease", "Wounds", "Other","Troup Strength"),
       text.col = c("gray40", "red", "navyblue", "seagreen4"), bty = 'n',
       cex = 0.8)

detach(Nightingale)
```



**Plot 19 September 7, 2018:** A look at line plots, again using _Graphing Data with R_.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get data
library(HistData)
attach(Nightingale)

# set plotframe params
par(mfrow = c(2,2))

# plot 1
plot(Date, Disease, 
     type = 'b',
     pch = 20,
     lty = 'solid',
     main = "Line Chart of Disease Deaths")

# plot 2
plot(Date, Disease, 
     type = 'l',
     pch = 20,
     lty = 'solid',
     main = "Line Chart of Disease, Wounds, Other")
lines(Date, Wounds,
      lty = 'dashed',
      col = 'red',
      lwd = 2)
lines(Date, Other,
      lty = 'dotted',
      col = 'navyblue',
      lwd = 2)

# Plot 3
plot(Date, Disease,
     type = 'h',
     lty = 'solid',
     lwd = 10, lend = 'butt',
     main = "Change Disease to Histogram",
     col = 'gray67')
lines(Date, Wounds,
      lty = 'solid',
      col = 'red',
      lwd = 2)
lines(Date, Other,
      lty = 'dotted',
      col = 'navyblue',
      lwd = 2)

# plot 4
plot(Date, Disease,
     type = 'h',
     lty = 'solid',
     lwd = 20, col = 'gray67',
     main = "Add legend, remove frame",
     lend = 'butt', bty = 'l')
lines(Date, Wounds,
      lty = 'solid',
      col = 'red',
      lwd = 2)
lines(Date, Other,
      lty = 'dotted',
      col = 'navyblue',
      lwd = 2)
legend("topleft",
       c("Disease", "Wounds", "Other"),
       text.col = c('gray40', 'red', 'navyblue'),
       bty = 'n', cex = 0.7)

detach(Nightingale)
```


**Plot 18 September 5, 2018:** Next up is a study of scatter plots using _Graphing Data with R_. I think of scatter plots as akin to strip plots over two dimensions instead of just one. This is a versatile plot, not only allowing you to look at distributions or identify trends, but also to identify outliers and data points with potentially undue leverage. Depending on how the plot is implemented (i.e with labels or information contained in a hover tool), scatter plots can also be used to examine individual data points and compare their values to other points.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get data and create subset
attach(trees)
trees2 = trees[1:2,]

# set plot frame params
par(mfrow=c(2,2), cex=0.7)

# plot 1
plot(trees2$Height, trees2$Girth,
     xlim = c(60,85),
     ylim = c(8, 10),
     xlab = "Tree Height",
     ylab = "Tree Girth",
     main = "a. First Two Observations")

# plot 1 annotations
text(trees2[1,2], trees2[1,1], 
     labels = paste("Height =", trees2[1,2], ", Girth =", trees2[1,1]),
     xlim = c(61,80), 
     ylim = c(8, 22),
     adj = c(0.5, 1.5))

text(trees2[2,2], trees2[2,1], 
     labels = paste(trees2[2,2], ",", trees2[2,1]),
     xlim = c(62,89), 
     ylim = c(8, 22),
     adj = c(0.5, -1.5))

# Plot 2
plot(Height, Girth, main = "b. Basic Scatter Plot")

# Plot 3
plot(Height, Girth, 
     pch = 20,
     col = "deepskyblue",
     main = "c. Customized Plot")
     grid(col = "gray70")
     
# Plot 4
plot(Height, Girth, 
     pch = 20,
     col = "deepskyblue",
     main = "d. Regression Line")
     grid(col = "gray70")
abline(lm(Girth ~ Height), 
       lty = 1,lwd = 2,
       col = "dodgerblue4")

# clean up
detach(trees)

```



**Plot 17 September 3, 2018**
Rug plots are appended to other types of charts in order to show single variable distributions that might otherwise not be apparent in the principal chart. Rug plots are conceptually similar to strip plots.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get pkgs and data
library(multcomp)

# set plot params
par(mfrow=c(2,2))

# plot with rug distribution along upper edge
stripchart(mtcars$drat, 
           main = "a. side=3", method = 'jitter',
           pch = 20, col = 'sienna4')
rug(mtcars$drat, side = 3)

# boxplot with rug distribution along left edge
boxplot(mtcars$drat, main = "b. side=2",
        col = 'firebrick')
rug(mtcars$drat, col = 'darkmagenta', side = 2)

# histogram with run distribution along bottom edge
hist(airquality$Ozone, main = "c. side=1",
     col = 'cyan4')
rug(airquality$Ozone, side = 1, col = 'cyan4')

# boxplot with rug distribution along righ edge
boxplot(sbp$sbp, main = "d. side=4", col = 'darkorange3')
rug(sbp$sbp, side = 4, col = 'cornsilk4')

```


**Plot 16 September 1, 2018**
Fan plots show proportional differences much better than the similar pie chart, but are not widely known or used so they can be confusing unless some instruction is given on how to interpret them.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
library(plotrix)

# set portfolio allocations
allocate <- c(30,25,28,10,7)

# set labels
sector = c("Stock", "For'n'", "Bonds", "Gold", "Cash")
sectorcol = c("burlywood", "turquoise", "firebrick", "gold3", "green4")

# plot 
fan.plot(allocate, labels = sector, col = sectorcol, 
         ticks = 30, main = "Fan Plot")
```

At first, it wasn't clear with this plot how the total arc-span of the full plot is determined. For example, the plot above from _Graphing Data with R_ happens to plot a aesthetically appealing angle, but when I tried plotting some data on some data of my own the results were different, specifically the total arc.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# create vector
rvrslts <- c(216, 83, 22)
ls <- c("Failed", "Passed", "Ungradable")

# plot without span arg
fan.plot(rvrslts, labels = ls, radius = 1,
         main = "Fan Plot 2")


```

The arc of the fan is much wider and more difficult to take in at a glance, not to mention the title is pushed almost completely out of the plotframe. The argument that can be used to set the total arc is `max.span` and it takes radian values. For the same vector plotted above, I this time tried different values for `max.span`.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# create vector
rvrslts <- c(216, 83, 22)
ls <- c("Failed", "Passed", "Ungradable")

# plot 
fan.plot(rvrslts, labels = ls, max.span = 3*pi/4, radius = 1,
         main = "Arc max.span = 3*pi/4")

```

I tried some other values for `max.span` but with mixed results. For example, using `pi` resulted in a chart of which half looked like it was missing.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# create vector
rvrslts <- c(216, 83, 22)
ls <- c("Failed", "Passed", "Ungradable")

# plot  
fan.plot(rvrslts, labels = ls, max.span = pi, radius = 1,
         main = "Arc max.span = pi")

```

It seems like an arc of `2*pi/3 >= max.span > pi` is the best option. Values less than 2*pi/3 risk not leaving enough room for labels. 


**Plot 15 August 30, 2018**
It's fallen out of vogue because it's difficult to interpret accurately, but the pie plot can still work well to show the proportional differences of a variable with two or three levels. A study of pie charts from _Graphing Data with R_.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# create vector of investment proportions
allocate <- c(30, 25, 28, 10, 7)

# labels, colores 
sector = c("Stock", "For'n'", "Bonds", "Gold", "Cash")
sectorcol = c("burlywood", "turquoise", "firebrick", "gold3", "green4")

# set plotframe params
par(mfrow = c(2,2))

pie(allocate, labels = sector, radius = 1,
    main = "Pie Chart - Default Colors")

pie(allocate, labels = sector, radius = 1, 
    col = sectorcol, main = "Pie Chart - Set Colors")

library(plotrix)
pie3D(allocate, labels = sector, col = sectorcol, explode = 0.05,
      labelcex = 0.75, labelrad = 1.0, main = "Plotrix - 3D Pie Chart")

barplot(allocate, names.arg = sector, col = sectorcol, 
        main = "Barplot for Comparison")

```




**Plot 14 - August 29, 2018**
Study of bar plot orientation and spacing from _Graphing Data with R_.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get data
library(car)
attach(Salaries)

# calculate group means
grp.sal <- aggregate(
        salary ~ sex * rank, FUN = mean
)

# label vectors
rankname <- c(" Asst", " ", " Assoc", " ", " Prof", " ")
sexcol <- c("blue", "maroon")
sexlab <- c("Female", "Male")

# set plot frame params
par(mfrow = c(2,2))

# vertical bar chart with default bar spacing
barplot(grp.sal$salary, names.arg = rankname, col = sexcol,
        ylab = "Average Salary", main = "Avg Faculty Salaries",
        sub = "a. Default spacing between bars")
        legend("topleft", sexlab, text.col = sexcol, text.font = 2,
               title = "Sex", title.col = "black", bty = "n", cex = 0.6)

# set spacing between bars
barplot(grp.sal$salary, names.arg = rankname, col = sexcol, space = 1.5,
        ylab = "Average Salary", main = "Avg Faculty Salaries",
        sub = "b. Spacing explicitly set, space=1.5")
        legend("topleft", sexlab, text.col = sexcol, text.font = 2,
               title = "Sex", title.col = "black", bty = "n", cex = 0.6)

# use spacing to group bars by rank
barplot(grp.sal$salary, names.arg = rankname, col = sexcol,
        space = c(0, 0, 1, 0, 1, 0),
        ylab = "Average Salary", main = "Avg Faculty Salaries",
        sub = "c. Same rank together")
        legend("topleft", sexlab, text.col = sexcol, text.font = 2,
               title = "Sex", title.col = "black", bty = "n", cex = 0.6)

# Horizontal bar plot using arg horiz=TRUE
barplot(grp.sal$salary, names.arg = rankname, col = sexcol,
        space = c(0, 0, 1, 0, 1, 0), horiz = T, 
        ylab = "Average Salary", main = "Avg Faculty Salaries",
        sub = "d. Horizontal bar plot", las = 1, cex.names = 0.9)
        legend("bottomright", sexlab, text.col = sexcol, text.font = 2,
               title = "Sex", title.col = "black", bty = "n", cex = 0.6)
        
detach(Salaries)
```


**Plot 13 - August 28, 2018**
Bar Plot exercise from _Graphing Data with R_.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get data
library(car)
attach(Salaries)

# counts for each faculty rank
rankcount <- table(rank)

# avg salary for each rank
aver = aggregate(salary ~ rank, FUN = mean)

# table of salaries by rank and sex
rank2 <- table(rank, sex)


# set plot frame params
par(mfrow = c(2,2))

barplot(rankcount, ylab = "Count", col = "skyblue",
        main = "Faculty by Rank", sub = "a. Number in each rank")

barplot(aver$salary, ylab = "Average Salary", names.arg = aver$rank, 
        col="skyblue", main = "Faculty Salaries",
        sub = "b. Average salary by rank")

barplot(rank2, ylab = "Count", name.arg = c("Male","Female"),
        main = "Faculty by Rank and Sex", 
        col = c("skyblue", "skyblue4", "burlywood"),
        sub = "c. Stacked Plot")
        legend("topleft", c("Prof", "Assoc", "Asst"),
        text.col = c("burlywood", "skyblue4", "skyblue"))

barplot(rank2, ylab = "Count", name.arg = c("Male", "Female"),
        main = "Faculty by Rank and Sex", 
        col = c("skyblue", "skyblue4", "burlywood"),
        sub = "c. Grouped Plot", beside = T)
        legend("topleft", c("Prof", "Assoc", "Asst"),
        text.col = c("burlywood", "skyblue4", "skyblue"))        
```

Spine Plot

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get tabular data
rank3 <- table(sex, rank)

spineplot(rank3, col = c("skyblue", "skyblue4", "burlywood"),
          main = "Faculty by Sex and Rank")

```



**Plot 12 - August 26, 2018**
Cumulative distribution plot from _Graphing Data with R_.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get packages
library(multcomp)
library(Hmisc)

# get random normal sample, n=10E5
sample <- (rnorm(100000))

# set up plot frame
par(mfrow=c(2, 2), cex.main = 0.9, bg = "white")

# plot kernel density of random sample
plot(density(sample), col = "coral4",
     main = "Density of Random Sample Normal Distribution")
polygon(density(sample), col = "coral4")

# plot cumulative density of sample
plot(ecdf(sample), col = "turquoise", lwd = 2,
     main = "Cumulative Density of Random Normal Sample")

# plot of sbp data to show sparcity
plot(ecdf(sbp$sbp), 
     main = "Step Function of Cumulative Density of SBP data")

# compare previous plot with same plot using Hmisc pkg
Ecdf(sbp$sbp, col = "deepskyblue3",
     main = "Hmisc Pkg Plot of Cumulative Density",
     xlab = "Systolic Blood Pressure")
grid(col = "gray70")
```


**Plot 11 - August 23, 2018**
Practice of density plot and cumulative distribution plot from _Graphing Data with R_.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get data and set params
library(multcomp)

par(mfrow = c(2,2), cex.main = 0.9)

## comparison of density plots, diff bandwidth, overlays
# use density() to get plot points
eq <-  density(sbp$sbp)
plot(eq, xlim = c(100,200),
     main = "Systolic Blood Pressure Density Plot",
     lwd = 2)

# overlay of density plot onto histogram
hist(sbp$sbp, 
     main="Histogram & Kernel Density Plot", col = "maroon",
     las = 1, cex.axis = .8, freq = F)
lines(eq, lwd = 2)

# same but low bandwidth value
eq2 <-  density(sbp$sbp, bw = 5)
hist(sbp$sbp, 
     main="Histogram & Kernel Density Plot", col = "maroon",
     las = 1, cex.axis = .8, freq = F)
lines(eq2, lwd = 2)

# same but high bandwidth value
eq3 <-  density(sbp$sbp, bw = 10)
hist(sbp$sbp, 
     main="Histogram & Kernel Density Plot", col = "maroon",
     las = 1, cex.axis = .8, freq = F)
lines(eq3, lwd = 2)
```

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get data
load("emiss.rda")

# calculate densities
eu <- density(emissions$Europe)
ea <- density(emissions$Eurasia)

# set plot frame params
par( bg="black", col.lab="white", col.axis="white", bty="l", 
     fg="white", col.main="white")

# plot overlapping densities
plot(eu, xlim = c(6.9, 9), ylim = c(0, 2),
     main = "Emissions Distributions - Europe & Eurasia",
     col="goldenrod", lwd=2)
lines(ea, lty = 2, lwd = 2, col = "cyan")
```



**Plot 10 - August 22, 2018**
Study of histograms from _Graphing Data with R_.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get data
library(multcomp)

# set plot grid
par(mfrow=c(2,2))

# four histograms with different bin schema
hist(sbp$sbp, main="R decides bin size")
hist(sbp$sbp, breaks=c(110,135,160,185), main="Choose break points")
hist(sbp$sbp, breaks=30, main="Suggest number of breaks")
hist(sbp$sbp, breaks=seq(110, 190, 15), main="Set first, last, increment")


```

```{r}
# add color, labels and turn numbers
hist(sbp$sbp, main="sbp dataset", las=1, label=T, 
     col="maroon", xlab="Systolic Blood Pressure")

```

```{r}
# get package
library(plotrix)
library(multcomp)
histStack(sbp$sbp, z=sbp$gender, 
          col=c("navy", "skyblue"),
          main="Systolic blook pressure by gender",
          xlab="Systolic blood pressure",
          legend="topright")

```

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get packages
library(RcmdrMisc)
library(multcomp)

# faceted histogram
Hist (sbp$sbp, groups=sbp$gender,
      main="Systolic blood pressure by gender",
      col = "navy", xlab="Systolic blood pressure")

```

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get packages
library(lattice)
library(car)

# lattice plot
histogram(~ Salaries$salary | Salaries$rank * Salaries$sex,
          type="count", main="Faculty Salaries by Rank & Gender")

```


**Plot 9 - August 17, 2018**
Practicing with _Graphing Data with R_, a mainstay of single variable EDA, the boxplot.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get data
library(nlme)

# test strip chart as means of looking at distribution
par(mfrow=c(2,1))

stripchart(MathAchieve$MathAch, method = "jitter",
           main = "a. Math Ach Scores, pch = '19'",
           pch = "19", xlab = "Scores")

stripchart(MathAchieve$MathAch, method = "jitter",
           main = "b. Math Ach Scores, pch = '.'",
           pch = ".", xlab = "Scores")

# compare above with boxplot
par(mfrow=c(1,2))

boxplot(MathAchieve$MathAch,
        main = "Math Achievement Scores", ylab = "Scores")

boxplot(MathAchieve$SES,
        main = "SocioEconomic Status", ylab = "SES Score")

# more detailed versions of plots
par(mfrow=c(2,2))

attach(MathAchieve)

boxplot(MathAch ~ Minority, 
        main = "a. Math Achievement by Minority", cex = 0.4)

boxplot(MathAch ~ Minority*Sex,
        main = "b. Math Achievement by Minority, Gender", cex = 0.4)

boxplot(MathAch ~ Minority*Sex,
        main = "c. Math by Minority, Gender (width=n)",
        varwidth = TRUE, cex = 0.4) #sets width to size of subgroup box represents
        
boxplot(MathAch ~ Minority*Sex,
        main = "d. Same as c. with Color by Minority",
        varwidth = TRUE,
        col = c("red", "blue"), cex = 0.4)

```


**Plot 8 - August 16, 2018**
Still working with _Graphing Data with R_. Next chart is a dot plot that adds another dimension over the simple strip plot.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get data
attach(USArrests)

# order data
data2 = USArrests[order(USArrests$Murder),]

# base plot
dotchart(data2$Murder, cex = 0.5, pch = 19,
         labels = row.names(data2), 
         main = "Murder Arrest Rates by State, 1973",
         xlab = "Arrests per 100,000 people",
         col = c("darkblue", "dodgerblue"),
         cex.lab = 1.5, cex.main = 2)
```

**Plot 7 - August 15, 2018**
Picked up Hilfiger's _Graphing Data with R_. To start the simple strip plot used for getting a quick look at the distribution and density of a variable.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
# get data
attach(trees)

# set plot parameters
par(bty="n")

# create chart
stripchart(Volume, 
           method="jitter", jitter=0.3,
           pch=20,
           xlab="Volume in Cubic Feet",
           col="dodgerblue4",
           ylim=c(0.25,1.75),
           xlim=c(0,80))

# format peripheral elements
axis(1, col="dodgerblue4", at=c(0,10,20,30,40,50,60,70,80))
title("Strip Chart of Tree Volume")
```


**Plot 7 - June 6, 2018**
Surveying the repertoire of basic Tableau charts. Practicing plots and here is the highlight chart with and without text.

!["Highlight Table with Text"](highlight_table_text.png)

!["Highlight Table with Text Removed"](highlight_table_no_text.png)

**Plot 6 - May 18, 2018**
A simple visualization using the [`elliplot` package](https://github.com/cran/elliplot) by Shinichiro Tomizono.The `ellipseplot` function that produces a correlation chart and visualizes the effect of factors on the relationship between the two principal variables. This plot is to test the capabilities of the function and is not optimized in terms of formatting.

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
### Daily Plot for May 18, 2018 ###

# get packages
library(elliplot)

# load data
bb <- read.csv("baseball/baseball_data_final.csv")

# ellipse plot of home run count by weight by handedness
ellipseplot(bb[,c('hand', 'weight')], bb[,c('hand', 'hr')], col=c('cyan', 'yellow', 'magenta'), SUMMARY=fivenum); title("Home Run Count by Player Weight")

```

**Plot 5 - May 6, 2018**
This visualization was a duplication exercise of a [plot in the NYTimes](https://www.nytimes.com/2018/05/04/business/economy/jobs-report.html). It was created using ggplot2.


```{r echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}
### Daily Plot for May 6, 2018 ###

# Plot of historical unemployment data in the US from 1948 through April 2018

# get packages
library(ggplot2)
library(lubridate)

# get data
t3 <- read.csv("employment/unemployment_data.csv")
r <- read.csv("employment/recession_data.csv")

# format data
r$start <- as.Date(r$start)
r$end <- as.Date(r$end)
t3$dt <- as.Date(t3$dt)

# create plot
ggplot() + 
        
        # time series line of unemployment rate
        geom_line(data=t3,
                  aes(x=dt, y=value),
                  show.legend = F) +
        
        # point with label for rate April 2018
        geom_point(data=data.frame(x=c(as.Date("2018-04-01")), y = c(3.9)), 
                   aes(x=x, y=y)) +
        geom_text(data=data.frame(x=c(as.Date("2018-04-01")), y = c(3.9)),
                  aes(x=x, y=y, label = paste0(y, "%")),
                  nudge_x = 20, nudge_y = -0.25,
                  size = 4, color="blue") +
        
        # bands for periods of recession
        geom_rect(data=r, aes(xmin=start, xmax=end, ymin=2, ymax=11), 
                  color=NA, fill="grey50", alpha=0.2) +
        
        # labels and titles
        labs(title="US Unemployment Rate", 
             subtitle="Recessions marked by gray bands", 
             y="Unemployment Rate (%)") + 
        
        # reference line for comparing historic precedence of April 2018 rate
        geom_hline(yintercept = 3.9, 
                   size = 1, 
                   color="blue", 
                   alpha=0.5,
                   linetype = 2) +
        
        # axis formatting
        scale_x_date(breaks = seq(as.Date("1945-01-01"),
                                  as.Date("2020-01-01"),
                                  "5 years"),
                     labels = year(seq(as.Date("1945-01-01"),
                                       as.Date("2020-01-01"),
                                       "5 years"))) +
        scale_y_continuous(limits = c(2, 11),
                           breaks = seq(2, 11, by = 2),
                           labels = as.double(seq(2, 11, by = 2))) +
        
        # plot panel formatting
        theme_minimal() + theme(plot.title = element_text(hjust = 0.5, 
                                                          size = 18), 
                           plot.subtitle = element_text(hjust = 0.5, size = 8),
                           axis.text.x = element_text(size = 10,
                                                      hjust = 1,
                                                      angle = 70),
                           axis.text.y = element_text(size = 10),
                           axis.title.x = element_blank())


```



**Plot 4 - May 5, 2018**

This visualization looks at some key performance stats for some of the biggest and most well-known teams in professional hockey. 

Data: www.sports-reference.com. Use agreement: https://www.sports-reference.com/termsofuse.html

It's also an exploration of slope charts and their implementation in Tableau as well as adding images to the hover tool window. The full dashboard can be experienced [here](https://public.tableau.com/profile/conner.mcbride#!/vizhome/NHLHockeyStatsSlopeChart/Dashboard1?publish=yes).And a snapshot:

![](NHL_viz.png)

**Plot 3 - April 24, 2018**

This plot, a slope chart, was inspired by the walk-through in Ben Jones' _Communicating Data with Tableau_. The dataset is one of the sample sets that comes with Tableau, World Indicators. The dataset worked well for practicing the slope chart but the slope chart isn't necessarily the best choice for some of the indicators that can be selected. Still it was great practice, and I've added an useful plot type to my repertoire. The full dashboard can be experienced [here](https://public.tableau.com/profile/conner.mcbride#!/vizhome/slopechart_exploration/Dashboard1?publish=yes). And a snapshot of the dashboard plotting changes in GDP between 2000 and 2012 on selected countries:

![](slopechart_exploration.png)


**Plot 2 - April 9, 2018**

This plot from a walk-through by Ben Jones in his book _Communicating Data with Tableau_. The full interactive dashboard can be experience [here](https://public.tableau.com/profile/conner.mcbride#!/vizhome/presidents_timeline/Dashboard1?publish=yes). A snapshot of the dashboard:

![](presidents_timeline.png)



**Plot 1 - April 2, 2018**

Not just a plot, this example is a dynamic app that allows the user to select state and year values to plot the geographic distribution of earthquakes by the selected variables. The app uses a live API to query the USGS for historical earthquake data. The API algorithm required some maintaince work and help was provided by [other developers at StackOverflow](https://stackoverflow.com/questions/49545608/r-what-causes-error-when-using-usgs-api?noredirect=1#comment86099289_49545608). The reactive function uses max/min latitude and longitude of the selected state to narrow the query and speed plotting. It then tests each observation point with a "inpolygon" test, before plotting. The app can be experienced [here](https://connermcb.shinyapps.io/quakes_shiny_app/). A snapshot of the app and a sample plot:

![](earthquakes.PNG)

**Plot 0 - March 27, 2018**

This plot is my rendition of a [beautiful line graph](https://www.nytimes.com/interactive/2018/03/23/climate/arctic-ice-maximum.html) published on March 3, 2018 in the New York Times that accompanied an article by KENDRA PIERRE-LOUIS, NADJA POPOVICH and ADAM PEARCE on decreases in arctic sea ice. My plot is an exercise in trying to produce similar results.

The plot was built with ggplot2 in RStudio.The dataset is documented and available from the [National Snow & Ice Data Center](https://nsidc.org/data/search/#keywords=sea+ice/sortKeys=score,,desc/facetFilters=%257B%257D/pageNumber=1/itemsPerPage=25) with compressed csv files for download at a [linked FTP server](ftp://sidads.colorado.edu/DATASETS/NOAA/G02135/). 

```{r echo=FALSE, warning=FALSE,message=FALSE}
library(ggplot2)
library(readr)
library(lubridate)
library(dplyr)
```

```{r echo=FALSE,message=FALSE, warning=FALSE}
setwd("../../conner/daily_plots/")

ice_df <- read_csv("sea_ice/N_seaice_extent_daily_v3.0.csv")
```

```{r echo=FALSE,warning=FALSE}
## format and clean data

# modify variable class
ice_df$Extent <- as.numeric(ice_df$Extent)

# remove irrelevant variables
ice_df <- ice_df[2:nrow(ice_df), -c(5, 6)]

# remove partial year 1978, partial data
ice_df <- subset(ice_df, Year != "1978")

# subset for winter months
ice_df <- subset(ice_df, Month %in% c("01", "02", "03", "04", "05"))
```

```{r echo=FALSE,}
## format month/day dates for plotting years in same plot frame

# combine month and day into string 
full_dates <- with(ice_df, paste0(Month, "/", Day, "/", Year))
full_dates <- mdy(full_dates)
mnth_day <- format(full_dates, format="%m-%d")

# add month/day to df
ice_df <- cbind(ice_df, mnth_day)

# add mean extension of ice by year
ice_df$annual_mean <- ave(ice_df$Extent, ice_df$Year)

# get max extension of ice by year
maxes <- ice_df %>%
         group_by(Year) %>%
         slice(which.max(Extent))
         
```


```{r echo=FALSE,}
# define color palette
brks <- seq(from=90, to=40, length.out = 40)
palt <- sapply(brks, function(x){hcl(h=180, c=0, l=x)})

```


```{r echo=FALSE, fig.align="center", fig.height=5, fig.width=8}
# plot of sea ice extent
ggplot()+
  
  # line plot of all year except 2018
  geom_line(data=subset(ice_df, Year != "2018"),
            aes(x=mnth_day, y=Extent, color=Year, group=Year), 
            size=1) +
  
  # line plot of only 2018
  geom_line(data=subset(ice_df, Year == "2018"), 
            aes(x=mnth_day, y=Extent, group=Year), 
            size=1.25, color="black", lineend="square") +
  
  # color scale using custom palette
  scale_color_manual(values=palt, guide=FALSE) +
  
  # max value background
  geom_point(data=maxes, aes(x=mnth_day, y=Extent),
             color="grey20", size= 3) +
  
  # max value foreground
  geom_point(data=maxes, aes(x=mnth_day, y=Extent, color=Year),
             size= 2) +
  
  # max value 2018
  geom_point(data=subset(maxes, Year==2018),
             aes(x=mnth_day, y=Extent),
             color="black", size= 2) +
  
  # labels for 2018, 1979
  geom_text(data=subset(maxes, Year %in% c("1979", "2018")),
            aes(x=mnth_day, y=Extent, label=Year),
            nudge_x = 3.5, nudge_y = 0.175)+
  
  # Formatting
  labs(title="Extent of Artic Winter Sea Ice by Year",
       y="Millions of Square Kilometers",
       x="") +
  scale_x_discrete(breaks=c("01-01", "02-01", "03-01", "04-01", "05-01", "05-30"),
                   labels=c("Jan", "Feb", "Mar", "Apr", "May", "June"))+
  scale_y_continuous(breaks=c(12, 14, 16)) +
  theme(plot.title = element_text(hjust = 0.5, size=20),
        plot.background = element_blank(),
        panel.background = element_blank(),
        panel.grid = element_blank())

```
